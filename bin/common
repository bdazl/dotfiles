#!/usr/bin/env bash

error() {
    echo "error: $1" 1>&2
    exit 1
}

use_color() {
    [[ -t 1 ]]
}

color() {
    if use_color; then
        printf '%b' "$1"
    fi
}

log_info() {
    color "\033[34m"
    echo "$1"
    color "\033[0m"
}

log_ok() {
    color "\033[32m"
    echo "$1"
    color "\033[0m"
}

log_warn() {
    color "\033[33m"
    echo "$1"
    color "\033[0m"
}

prompt_user() {
    prompt="$1"
    default="${2:-N}"

    if [[ "$default" =~ ^[Yy]$ ]]; then
        read -p "$prompt [Y/n] " -n 1 -r
    else
        read -p "$prompt [y/N] " -n 1 -r
    fi
    [[ -n "$REPLY" ]] && echo
    if [[ "$REPLY" =~ ^[Yy]$ ]] || { [[ -z "$REPLY" ]] && [[ "$default" =~ ^[Yy]$ ]]; }; then
        return 0
    fi
    return 1
}
