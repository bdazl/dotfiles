#!/bin/sh
# Show dunst notification history in rofi

history=$(dunstctl history | jq -r '.data[0][] | "\(.appname.data): \(.summary.data) - \(.body.data)"')

if [ -z "$history" ]; then
    notify-send "Dunst" "No notifications in history"
    exit 0
fi

lines=$(echo "$history" | wc -l)
echo "$history" | rofi -dmenu -i -p " Notifications" -no-custom \
    -theme ~/.config/rofi/catppuccin.rasi \
    -theme-str 'listview { lines: '"$lines"'; }'
