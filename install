#!/usr/bin/env bash
set -e

REPO_ROOT=$(realpath $(dirname "${BASH_SOURCE[0]}"))
cd "${REPO_ROOT}"

DOTBOT_DIR="$REPO_ROOT/ext/dotbot"
DOTBOT_BIN="bin/dotbot"

git submodule update --init --recursive 

./bootstrap
./generate

CONFIG="$REPO_ROOT/etc/install.yml"
"${DOTBOT_DIR}/${DOTBOT_BIN}" -d "${REPO_ROOT}" -c "${CONFIG}" "${@}"
